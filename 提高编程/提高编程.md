本阶段主要针对C++ **泛型编程** 和 **STL技术** 做详细讲解，探讨C++更深层的使用。

# 1 模板

模板的特点：

- 不可以直接使用，只是一个框架；
- 模板的通用并不是万能的；

C++另一种编程思想称为 **泛型编程**，主要利用的技术就是模板。C++提供两种模板机制：

- 函数模板
- 类模板

## 1.1 函数模板

### 1.1.1 基本使用

函数模板作用：建立一个通用函数，其函数返回值类型和形参类型可以不具体制定，用一个 **虚拟的类型** 来代表。

语法：

```c++
template<typename T>
函数声明或定义
```

解释：

- `template`：声明创建模板；
- `typename`：表明其后面的符号是一个通用的数据类型，可以用 `class` 代替；
- `T`：通用的数据类型，名称可以替换，通常为大写字母；

实例：

```c++
void swapInt(int & a, int & b){
    int tmp = a;
    a = b;
    b = tmp;
}

void swapDouble(double & a, double & b){
    double tmp = a;
    a = b;
    b = tmp;
}
```

上面是两个不同类型的交换函数，这两个函数除了函数名之后唯一的区别就是类型不同，因此 **如果可以不指定类型，后续根据需要传入** 就可以简化代码。

```c++
template<typename T>
void mySwap(T & a, T & b){
    T tmp = a;
    a = b;
    b = tmp;
}
int a = 10;
int b = 20;
double c = 1.1;
double d = 2.2;
mySwap(a, b);  // 自动类型推导
mySwap<double>(c, d);  // 显示指定类型
```

总结：

- 函数的模板使用有两种方式：自动类型推导、显示指定类型；
- 模板的目的是为了提高复用性，将类型参数化；
- `typename` 和 `class` 作用一样，没有区别，不过一般是函数模板用 `typename`，类模板用 `class`；

### 1.1.2 注意事项

注意事项1：自动类型推导必须推导出一致的数据类型 `T` 才可以使用。

```c++
int a = 10;
double c = 1.1;
mySwap(a, c);
```

报错：deduced conflicting types for parameter 'T' ('int' and 'double')。意思是 `T` 的推导发生了冲突，不知道是 `int` 还是 `double`。

注意事项2：模板必须要确定出 `T` 的数据类型才可以使用；

```c++
template<typename T>
void func(){
    cout << "hello world" << endl;
}

int main(){
    func();
}
```

报错：couldn't deduce template parameter 'T'。意思是推导不出 `T` 的数据类型。

### 1.1.3 案例

案例描述：

- 利用函数模板封装一个排序的函数，可以对 **不同数据类型数据** 进行排序；
- 排序规则从大到小，排序算法为 **选择排序**；
- 分别利用 `char` 数据 和 `int` 数据进行测试；

```c++
#include <iostream>
using namespace std;

template<typename T>
void mySwap(T & a, T & b){
    T tmp = a;
    a = b;
    b = tmp;
}

template<typename T>
void mySort(T arr[], int len){
    for (int i = 0; i < len - 1; i++){
        int maxIdx = i;
        for (int j = i + 1; j < len; j++){
            if (arr[maxIdx] < arr [j]){
                maxIdx = j;
            }
        }
        if (maxIdx != i) {
            mySwap(arr[i], arr[maxIdx]);
        }
    }
}

template<typename T>
void printArr(T arr[], int len){
    for (int i = 0; i < len; i ++){
        cout << arr[i] << '\t';
    }
    cout << endl;
}


int main(){
    char charArr[] = "asdfhe";
    int intArr[] = {1, 4, 6, 8, 9, 2};
    int charArrLen = sizeof(charArr) / sizeof(charArr[0]);
    int intArrLen = sizeof(intArr) / sizeof(intArr[0]);
    mySort(charArr, charArrLen);
    mySort(intArr, intArrLen);
    printArr(charArr, charArrLen);
    printArr(intArr, intArrLen);
}

```

![image-20241016232012690](提高编程_pictures/image-20241016232012690.png)



# 2 STL 初识



# 3 STL - 常用容器



# 4 STL - 函数对象



# 5 STL - 常用算法

